<!DOCTYPE html>
<html lang="en">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/avatar.png">
  <link rel="icon" type="image/png" href="/img/avatar.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="description" content=" keywords: author: Miki language: zh-CN timezone: ">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  <title>Titanic 项目详解 ~ Miki&#39;s blog</title>

  <link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"  >
<link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css"  >
<link rel="stylesheet" href="/lib/mdbootstrap/css/mdb.min.css"  >
<link rel="stylesheet" href="/lib/github-markdown/github-markdown.min.css"  >

<link rel="stylesheet" href="//at.alicdn.com/t/font_1067060_qzomjdt8bmp.css">



  <link rel="stylesheet" href="/lib/prettify/tomorrow-night-eighties.min.css"  >

<link rel="stylesheet" href="/css/main.css"  >


  <link rel="stylesheet" href="/lib/fancybox/jquery.fancybox.min.css"  >


<meta name="generator" content="Hexo 4.2.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Miki's blog</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">首页</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/categories/">分类</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/tags/">标签</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">关于</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background" false
         style="background: url('/img/default.png')no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask rgba-black-light flex-center">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              <br>
              
                <p class="mt-3">
                  <i class="fas fa-calendar-alt" aria-hidden="true"></i>&nbsp;
                  Saturday, March 21st 2020, 2:07 pm
                </p>
              

              <p>
                
                  
                  &nbsp;<i class="far fa-chart-bar"></i>
                  <span class="post-count">
                    3.1k 字
                  </span>&nbsp;
                

                
                  
                  &nbsp;<i class="far fa-clock"></i>
                  <span class="post-count">
                      14 分钟
                  </span>&nbsp;
                

                
                  <!-- 不蒜子统计文章PV -->
                  
                  &nbsp;<i class="far fa-eye" aria-hidden="true"></i>&nbsp;
                  <span id="busuanzi_container_page_pv">
                    <span id="busuanzi_value_page_pv"></span> 次
                  </span>&nbsp;
                
              </p>
            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="py-5 z-depth-3" id="board">
        <div class="post-content mx-auto" id="post">
          <div class="markdown-body">
            <p>最近不打算更新博客，该把毕业论文和之前的笔记好好整理吸收下，打牢基础！！</p>
<p>我希望，这些笔记，以后能够当成参考书一样，方便查阅</p>
<p>​																			&gt;_&lt;</p>
<p>本篇主要对泰坦尼克号实战的详细原理解释，和对其他人的优秀代码分析</p>
<blockquote>
<p>提交了代码，预测准确度最后只有0.736，因此来看看别人的优秀代码，分析自己的不足</p>
</blockquote>
<h2 id="问题分析流程"><a class="markdownIt-Anchor" href="#问题分析流程"></a> 问题分析流程</h2>
<ol>
<li>获取数据，以任何方式</li>
<li>分析问题，比如说将实际问题归类为二分类的问题，选择合适的算法</li>
<li>数据转化，有些数据是以字符串的形式，因此要转换成数字，方便计算机处理，<strong>数据要如何进行转换，取决于你选择的算法</strong></li>
<li>填充数据值，因为获取的数据，某些样本的数据可能有部分缺失，或者不完整，我们可以用整体样本平均值或者将这一行数据删除</li>
<li>删除某些错误的数据</li>
<li>分析数据，进行特征工程分析（相关性分析），判断哪些特征对结果的影响比较大</li>
<li>分析能否创造一些新的有关特征，这些特征对我们解决问题比较有帮助</li>
<li>将你的数据可视化</li>
</ol>
<h2 id="代码部分"><a class="markdownIt-Anchor" href="#代码部分"></a> 代码部分</h2>
<h3 id="读取数据read_csv"><a class="markdownIt-Anchor" href="#读取数据read_csv"></a> 读取数据<code>read_csv()</code></h3>
<pre class="highlight"><code class="">import numpy as np
import pandas as pd

train_data = pd.read_csv(r'C:\Users\asus\Desktop\train.csv')
test_data = pd.read_csv(r'C:\Users\asus\Desktop\test.csv')
combine = [train_data, test_data]
print(combine[0])
#print(combine[0].shape)
</code></pre>
<pre class="highlight"><code class="">     PassengerId  Survived  Pclass  ...     Fare Cabin  Embarked
0              1         0       3  ...   7.2500   NaN         S
1              2         1       1  ...  71.2833   C85         C

(891, 12)
</code></pre>
<h3 id="获取标签columnsvalues"><a class="markdownIt-Anchor" href="#获取标签columnsvalues"></a> 获取标签<code>.columns.values</code></h3>
<pre class="highlight"><code class="">print(train_data.columns.values)
</code></pre>
<pre class="highlight"><code class="">['PassengerId' 'Survived' 'Pclass' 'Name' 'Sex' 'Age' 'SibSp' 'Parch'
 'Ticket' 'Fare' 'Cabin' 'Embarked']
</code></pre>
<blockquote>
<p><strong>参数说明</strong></p>
<p><strong>pclass</strong>: A proxy for socio-economic status (SES)<br />
1st = Upper<br />
2nd = Middle<br />
3rd = Lower</p>
<p><strong>age</strong>: Age is fractional if less than 1. If the age is estimated, is it in the form of xx.5</p>
<p><strong>sibsp</strong>: The dataset defines family relations in this way…<br />
Sibling = brother, sister, stepbrother, stepsister<br />
Spouse = husband, wife (mistresses and fiancés were ignored)</p>
<p><strong>parch</strong>: The dataset defines family relations in this way…<br />
Parent = mother, father<br />
Child = daughter, son, stepdaughter, stepson<br />
Some children travelled only with a nanny, therefore parch=0 for them.</p>
</blockquote>
<h3 id="打印数据前几行或后几行的内容head"><a class="markdownIt-Anchor" href="#打印数据前几行或后几行的内容head"></a> 打印数据前几行或后几行的内容<code>.head()</code></h3>
<pre class="highlight"><code class="">train_data.head(5)
# 打印前5行内容
train_data.tail()
# 打印后几行内容
</code></pre>
<h3 id="获取数据信息查看哪些数据有缺失info"><a class="markdownIt-Anchor" href="#获取数据信息查看哪些数据有缺失info"></a> 获取数据信息(查看哪些数据有缺失)<code>.info()</code></h3>
<p><strong>通过这种方法查看数据缺失值</strong></p>
<pre class="highlight"><code class="">print(train_data.info())
print('-'*40)
print(test_data.info())
</code></pre>
<pre class="highlight"><code class="">&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 891 entries, 0 to 890
Data columns (total 12 columns):
PassengerId    891 non-null int64
Survived       891 non-null int64
Pclass         891 non-null int64
Name           891 non-null object
Sex            891 non-null object
Age            714 non-null float64
SibSp          891 non-null int64
Parch          891 non-null int64
Ticket         891 non-null object
Fare           891 non-null float64
Cabin          204 non-null object
Embarked       889 non-null object
dtypes: float64(2), int64(5), object(5)
memory usage: 83.7+ KB
None
----------------------------------------
&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 418 entries, 0 to 417
Data columns (total 11 columns):
PassengerId    418 non-null int64
Pclass         418 non-null int64
Name           418 non-null object
Sex            418 non-null object
Age            332 non-null float64
SibSp          418 non-null int64
Parch          418 non-null int64
Ticket         418 non-null object
Fare           417 non-null float64
Cabin          91 non-null object
Embarked       418 non-null object
dtypes: float64(2), int64(4), object(5)
memory usage: 36.0+ KB
None
</code></pre>
<h3 id="分析数据的数字特征describepercentilesinclude"><a class="markdownIt-Anchor" href="#分析数据的数字特征describepercentilesinclude"></a> 分析数据的数字特征<code>.describe(percentiles=,include=)</code></h3>
<pre class="highlight"><code class="">print(train_data.describe().iloc[:,1:])
</code></pre>
<pre class="highlight"><code class="">         Survived      Pclass         Age       SibSp       Parch        Fare
count  891.000000  891.000000  714.000000  891.000000  891.000000  891.000000
mean     0.383838    2.308642   29.699118    0.523008    0.381594   32.204208
std      0.486592    0.836071   14.526497    1.102743    0.806057   49.693429
min      0.000000    1.000000    0.420000    0.000000    0.000000    0.000000
25%      0.000000    2.000000   20.125000    0.000000    0.000000    7.910400
50%      0.000000    3.000000   28.000000    0.000000    0.000000   14.454200
75%      1.000000    3.000000   38.000000    1.000000    0.000000   31.000000
max      1.000000    3.000000   80.000000    8.000000    6.000000  512.329200
</code></pre>
<p><code>describe()</code>的参数说明</p>
<ol>
<li>
<p><code>train_data.describe(percentiles=[.8, .7])</code>表示可以输出80%和70%大的数字,直接这样描述,会<strong>只显示数字特征</strong></p>
</li>
<li>
<p><code>train_data.describe(include=['O'])</code>注意里面是大写的英文字母<code>O</code>,<strong>能输出非数字类型的数据特征</strong></p>
<ul>
<li>count：同上</li>
<li>unique：表示有多少种不同的值</li>
<li>top：数据中出现次数最高的值</li>
<li>freq：出现次数最高的那个值（top）的出现频率</li>
</ul>
</li>
</ol>
<pre class="highlight"><code class="">50%      0.000000    3.000000   28.000000    0.000000    0.000000   14.454200
70%      1.000000    3.000000   36.000000    1.000000    0.000000   27.000000
80%      1.000000    3.000000   41.000000    1.000000    1.000000   39.687500
max      1.000000    3.000000   80.000000    8.000000    6.000000  512.329200
</code></pre>
<pre class="highlight"><code class="">                        Name   Sex Ticket Cabin Embarked
count                    891   891    891   204      889
unique                   891     2    681   147        3
top     O'Brien, Mr. Timothy  male   1601    G6        S
freq                       1   577      7     4      644
</code></pre>
<p><strong>从中我们可以得到一些数字特征:</strong></p>
<p><strong>方差:当数据之间值差别比较大时,方差就比较大,虽然两组数据可能平均值一样</strong></p>
<ol>
<li>训练样本中大约有38%的人活下来了</li>
<li><code>Pclass</code>中1表示上等阶级,2表示中等阶级,我们可以发现高等阶级比较少</li>
<li>&gt;=75%的人,年龄都小于38岁</li>
<li>大部分人的票价,都比较低</li>
<li>带兄弟姐妹和家庭成员上船的还是比较多的</li>
</ol>
<hr />
<ol>
<li>名字是唯一的,没有人有相同的名字</li>
<li>性别只有两种,女性出现的次数比较多</li>
<li>有人共用船仓</li>
<li>大多数人的登陆地点为S</li>
</ol>
<h3 id="特征筛选"><a class="markdownIt-Anchor" href="#特征筛选"></a> 特征筛选</h3>
<p><strong>对特征进行假设</strong></p>
<ol>
<li>假设年龄和生存率相关</li>
<li>假设登录地点和生存率相关</li>
</ol>
<p><strong>我们可能假设一些人生存几率比较大</strong></p>
<ol>
<li>女性的生存概率比男性的要大</li>
<li>Age&lt;?的孩子,生存率要大</li>
<li>upper-class,生存率要高</li>
</ol>
<p><strong>删除一些特征</strong></p>
<ol>
<li>船舱重复率比较高,而且数据缺失值较大,所以删除</li>
<li><code>PassengerID</code>只是用来标记的,对生存没什么影响</li>
<li>船票特征的重复率也比较高,所以我们也进行删除</li>
</ol>
<p><strong>增加一些新的特征</strong></p>
<ol>
<li>创建一个家庭特征,有些人带了亲人,或者一些情侣</li>
<li>由于名字是唯一的,其中表示了一些人的身份,可以从名字中提取特征</li>
<li>设置一个年龄段,这个年龄段的生存率要高一些</li>
</ol>
<h3 id="相关性测试重要groupby"><a class="markdownIt-Anchor" href="#相关性测试重要groupby"></a> 相关性测试(重要)<code>.groupby()</code></h3>
<p><strong>先介绍下pandas中的<code>groupby</code>函数的用法</strong></p>
<p><code>gorupby()</code>表示按什么进行分类</p>
<p>假设有下面<code>DataFrame</code>数据</p>
<pre class="highlight"><code class="">          Sex  Age
xiao1    male   38
xiao2  female   55
xiao3  female   44
xiao4  female   43
</code></pre>
<p>输入下面代码：</p>
<pre class="highlight"><code class="">print(df.groupby('Sex').describe())
</code></pre>
<p>输出：</p>
<pre class="highlight"><code class="">         Age                                                   
       count       mean       std   min   25%   50%   75%   max
Sex                                                            
female   3.0  47.333333  6.658328  43.0  43.5  44.0  49.5  55.0
male     1.0  38.000000       NaN  38.0  38.0  38.0  38.0  38.0
</code></pre>
<blockquote>
<p>表示对<code>DataFrame</code>中的数据，按Sex属性进行分组统计，统计的是Age的特征</p>
</blockquote>
<p><strong>假设加了一列属性</strong></p>
<pre class="highlight"><code class="">          Sex  Age  num
xiao1    male   38    1
xiao2  female   55    2
xiao3  female   44    3
xiao4  female   43    4
</code></pre>
<p><strong>输出：按Sex分组，统计<code>Age</code>和<code>num</code>的mean and std等信息</strong></p>
<pre class="highlight"><code class="">         Age                                   ...  num                    
       count       mean       std   min   25%  ...  min  25%  50%  75%  max
Sex                                            ...                         
female   3.0  47.333333  6.658328  43.0  43.5  ...  2.0  2.5  3.0  3.5  4.0
male     1.0  38.000000       NaN  38.0  38.0  ...  1.0  1.0  1.0  1.0  1.0
</code></pre>
<p><strong>当我们只想要统计Age信息时候</strong>，可进行下面这样修改</p>
<pre class="highlight"><code class="">print(df.groupby('Sex')['Age'].describe())
</code></pre>
<p><strong>输出：</strong></p>
<pre class="highlight"><code class="">        count       mean       std   min   25%   50%   75%   max
Sex                                                             
female    3.0  47.333333  6.658328  43.0  43.5  44.0  49.5  55.0
male      1.0  38.000000       NaN  38.0  38.0  38.0  38.0  38.0
</code></pre>
<p><strong>多类分组：</strong></p>
<pre class="highlight"><code class="">print(df.groupby(['Sex','Age']).describe())
</code></pre>
<blockquote>
<p>表示且关系，满足性别的所有女生归为一类</p>
</blockquote>
<pre class="highlight"><code class="">             num                                  
           count mean std  min  25%  50%  75%  max
Sex    Age                                        
female 43    1.0  4.0 NaN  4.0  4.0  4.0  4.0  4.0
       44    1.0  3.0 NaN  3.0  3.0  3.0  3.0  3.0
       55    1.0  2.0 NaN  2.0  2.0  2.0  2.0  2.0
male   38    1.0  1.0 NaN  1.0  1.0  1.0  1.0  1.0
</code></pre>
<p><strong>获得平均值</strong></p>
<blockquote>
<p>如法炮制，还可以获得std，min等属性</p>
</blockquote>
<pre class="highlight"><code class="">print(df.groupby(['Sex','Age']).mean())
</code></pre>
<pre class="highlight"><code class="">            num
Sex    Age     
female 43     4
       44     3
       55     2
male   38     1
</code></pre>
<p><strong><code>as_index=</code>的用法</strong>(不改变索引)</p>
<pre class="highlight"><code class="">print(df.groupby(['Sex','Age'],as_index=True).mean())
print(df.groupby(['Sex','Age'], as_index=False).mean())
</code></pre>
<p>输出：</p>
<pre class="highlight"><code class="">            num
Sex    Age     
female 43     4
       44     3
       55     2
male   38     1

      Sex  Age  num
0  female   43    4
1  female   44    3
2  female   55    2
3    male   38    1
</code></pre>
<ul>
<li>注意<code>groupby</code>不能针对字符串类型使用</li>
</ul>
<h3 id="计算相关性"><a class="markdownIt-Anchor" href="#计算相关性"></a> 计算相关性</h3>
<p><strong>假设我们有一组数据</strong></p>
<pre class="highlight"><code class="">      Sex  Age  num
xiao1   0   38    1
xiao2   1   55    2
xiao3   1   41    2
xiao4   1   43    4
</code></pre>
<p><strong>输入下列指令</strong>,计算平均值</p>
<pre class="highlight"><code class="">print(df.loc[:,['Sex','Age']].groupby(&quot;Sex&quot;, as_index=False).mean())
</code></pre>
<pre class="highlight"><code class="">  Sex        Age
0   0  38.000000
1   1  46.333333
</code></pre>
<blockquote>
<p>该指令的意思是只按性别和年龄两列属性统计，按照性别进行分组，我们假设0为男性，1为女性，则男性年龄的平均值为38*1，女性平均值(55+41+43)/3</p>
</blockquote>
<pre class="highlight"><code class="">print(train_data.loc[:,['Survived', 'Pclass']].groupby(['Pclass'], as_index=True).mean())
</code></pre>
<pre class="highlight"><code class="">        Survived
Pclass          
1       0.629630
2       0.472826
3       0.242363
</code></pre>
<p>说明上等阶级中，所有存活的为1加起来，然后除以上等阶级总人数(上等阶级中，有60%的人活下来了)，中等阶级中接近50%的人活下来了，下等阶级中，只有25%的人活下来了</p>
<pre class="highlight"><code class="">print(train_data.loc[:,['Survived', 'Sex']].groupby(['Sex'], as_index=True).mean())
</code></pre>
<pre class="highlight"><code class="">        Survived
Sex             
female  0.742038
male    0.188908
</code></pre>
<p>同理可以看出，女性中，70%的人活下来了，男性中19%的人活下来了</p>
<h2 id="处理数据"><a class="markdownIt-Anchor" href="#处理数据"></a> 处理数据</h2>
<h3 id="删除某一行或某一列数据drop"><a class="markdownIt-Anchor" href="#删除某一行或某一列数据drop"></a> 删除某一行或某一列数据<code>drop()</code></h3>
<p><strong><code>drop()</code>函数，它不改变原有的<code>df</code>中的数据，而是返回另一个<code>dataframe</code>来存放删除后的数据。</strong></p>
<p><a href="https://blog.csdn.net/nuaadot/article/details/78304642" target="_blank" rel="noopener">参考</a></p>
<pre class="highlight"><code class="">print frame.drop(['a'])
print frame.drop(['Ohio'], axis = 1)
</code></pre>
<p>drop函数默认删除行，列需要加axis = 1</p>
<p><strong>采用drop方法，有下面三种等价的表达式：</strong></p>
<pre class="highlight"><code class="">1. DF= DF.drop('column_name', axis=1)；
2. DF.drop('column_name',axis=1, inplace=True)
3. DF.drop([DF.columns[[0,1, 3]]], axis=1, inplace=True)   # Note: zero indexed
</code></pre>
<p>注意：<strong>凡是会对原数组作出修改并返回一个新数组的，往往都有一个<code>inplace</code>可选参数。如果手动设定为True（默认为False）</strong>，那么原数组直接就被替换。也就是说，采用<code>inplace=True</code>之后，原数组名（如2和3情况所示）对应的内存值直接改变</p>
<pre class="highlight"><code class="">train_data, test_data =\
    train_data.drop(['Ticket', 'Cabin'], axis=1), test_data.drop(['Ticket', 'Cabin'], axis=1)
print(train_data.shape, test_data.shape)
</code></pre>
<p>输出：测试集比训练集少了是否生存这一个标签</p>
<pre class="highlight"><code class="">(891, 10) (418, 9)
</code></pre>
<h3 id="增加新的变量extract"><a class="markdownIt-Anchor" href="#增加新的变量extract"></a> 增加新的变量<code>extract()</code></h3>
<p><strong>使用正则将名字中的标签提取出来</strong><code>.</code>，要转义，否则就是表示任意字符</p>
<pre class="highlight"><code class="">r = re.compile(r' (.*?)\.', re.S)
print(re.search(r, each).group(1))
</code></pre>
<pre class="highlight"><code class="">Mr
Mrs
Miss
</code></pre>
<blockquote>
<p>由于正则要很多操作，比较麻烦，所以这里用extract函数，直接一步搞定</p>
</blockquote>
<p>expand=True在一组返回值的情况下，返回数据框</p>
<p>expand=False在一组返回值的情况下，返回序列(Series)</p>
<pre class="highlight"><code class="">     0    # 返回数据框
0    1
1    2
2  NaN		
</code></pre>
<pre class="highlight"><code class="">0      1  # 不返回数据框
1      2
2    NaN
</code></pre>
<p><strong>输入代码</strong>,可以看到直接完成</p>
<pre class="highlight"><code class="">train_data['Title'] = train_data.Name.str.extract(r' (.*?)\.', expand=False)
print(train_data.Title)
</code></pre>
<pre class="highlight"><code class="">0        Mr
1       Mrs
2      Miss
3       Mrs
</code></pre>
<p>我们需要同时对训练集和测试集进行操作</p>
<pre class="highlight"><code class="">train_data['Title'] = train_data.Name.str.extract(r' (.*?)\.', expand=False)
test_data['Title'] = test_data.Name.str.extract(r' (.*?)\.', expand=False)
</code></pre>
<h2 id="统计出现频率crosstab"><a class="markdownIt-Anchor" href="#统计出现频率crosstab"></a> 统计出现频率<code>crosstab()</code></h2>
<p><code>crosstab([],[])</code>, 左边是行，右边是列，可以是数组，也可以不是，行表示特征1，列表示特征2，整个结果为特征1元素在特征2中出现的频率</p>
<pre class="highlight"><code class="">print(pd.crosstab(train_data.Title,train_data.Survived))
</code></pre>
<pre class="highlight"><code class="">Survived        0    1
Title                 
Capt            1    0
Col             1    1
Don             1    0
Dr              4    3
Jonkheer        1    0
</code></pre>
<h2 id="数据替换replace"><a class="markdownIt-Anchor" href="#数据替换replace"></a> 数据替换<code>replace()</code></h2>
<pre class="highlight"><code class="">train_data['Title'] = train_data['Title'].replace(['Lady', 'Countess','Capt', 'Col',
 	'Don', 'Dr', 'Major', 'Rev', 'Sir', 'Jonkheer', 'Dona'], 'Rare')
test_data['Title'] = test_data['Title'].replace(['Lady', 'Countess','Capt', 'Col',
 	'Don', 'Dr', 'Major', 'Rev', 'Sir', 'Jonkheer', 'Dona'], 'Rare')
</code></pre>
<ul>
<li>我们将一些出现频率比较低的，都替换为一类</li>
</ul>
<pre class="highlight"><code class="">train_data.drop(train_data.Title[train_data.Title == 'the Countess'].index, inplace=True)
</code></pre>
<blockquote>
<p>这里之前正则处理的姓名有一个出了问题，于是把这个数据进行删除，利用布尔运算，得到一个Series，然后利用其index属性得到行数，再进行删除，如果<code>inplace</code>不设置，则不会改变原先的数据</p>
</blockquote>
<h3 id="将字符串数据转换成数值型map函数"><a class="markdownIt-Anchor" href="#将字符串数据转换成数值型map函数"></a> 将字符串数据转换成数值型<code>map()</code>函数</h3>
<pre class="highlight"><code class="">title_mapping = {&quot;Mr&quot;: 1, &quot;Miss&quot;: 2, &quot;Mrs&quot;: 3, &quot;Master&quot;: 4, &quot;Rare&quot;: 5}
train_data.Title = train_data.Title.map(title_mapping)
print(train_data.Title)
</code></pre>
<pre class="highlight"><code class="">0      1
1      3
2      2
</code></pre>
<p>可以看到将<code>{&quot;Mr&quot;: 1, &quot;Miss&quot;: 2, &quot;Mrs&quot;: 3, &quot;Master&quot;: 4, &quot;Rare&quot;: 5}</code>字典中有的，都转换成了对应的数字</p>
<p>注意：</p>
<p><strong>当数据中没有对应的键时，其原有数据就会被替换成<code>NaN</code></strong></p>
<h3 id="数据填充fillna"><a class="markdownIt-Anchor" href="#数据填充fillna"></a> 数据填充<code>fillna()</code></h3>
<p><code>.fillna(填充值)</code></p>
<pre class="highlight"><code class="">train_data['Age'] = train_data['Age'].fillna(train_data['Age'].median())
print(train_data['Age'].median())
</code></pre>

            <hr>
          </div>
          <br>
          <div>
            <p>
            
              <span>
                <i class="iconfont icon-inbox"></i>
                
                  <a class="hover-with-bg" href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98">项目实战</a>
                  &nbsp;
                
              </span>&nbsp;&nbsp;
            
            
              <span>
                <i class="iconfont icon-tag"></i>
                
                  <a class="hover-with-bg" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0">机器学习</a>
                
              </span>
            
            </p>
            
              <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="nofollow noopener noopener">CC BY-SA 3.0协议</a> 。转载请注明出处！</p>
            
          </div>
        </div>
      </div>
    </div>
    <div class="d-none d-lg-block col-lg-2 toc-container">
      
  <div id="toc">
    <p class="h5"><i class="far fa-list-alt"></i>&nbsp;目录</p>
    <div id="tocbot"></div>
  </div>

    </div>
  </div>
</div>

<!-- custom -->

  <div class="col-lg-7 mx-auto nopadding-md">
    <div class="container custom post-content mx-auto">
      <img src="https://octodex.github.com/images/jetpacktocat.png" class="rounded mx-auto d-block mt-5" style="width:150px; height:150px;">
    </div>
  </div>


<!-- Comments -->
<div class="col-lg-7 mx-auto nopadding-md">
  <div class="container comments mx-auto" id="comments">
    
  </div>
</div>

    
  </main>

  
    <a class="z-depth-1" id="scroll-top-button" href="#" role="button">
      <i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  <footer class="mt-5">
  <div class="text-center py-3">
    <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><b>Hexo</b></a>
    <i class="iconfont icon-love"></i>
    <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"> <b>Fluid</b></a>
    <br>

    
  
    <!-- 不蒜子统计PV -->
    
    &nbsp;<span id="busuanzi_container_site_pv"></span>总访问量 
          <span id="busuanzi_value_site_pv"></span> 次&nbsp;
  
  
    <!-- 不蒜子统计UV -->
    
    &nbsp;<span id="busuanzi_container_site_uv"></span>总访客数 
            <span id="busuanzi_value_site_uv"></span> 人&nbsp;
  
  <br>



    


    <!-- cnzz Analytics icon -->
    

  </div>
</footer>

<!-- SCRIPTS -->
<script src="/lib/jquery/jquery.min.js" ></script>
<script src="/lib/popper/popper.min.js" ></script>
<script src="/lib/bootstrap/js/bootstrap.min.js" ></script>
<script src="/lib/mdbootstrap/js/mdb.min.js" ></script>
<script src="/js/main.js" ></script>


  <script src="/js/lazyload.js" ></script>



  <script src="/js/post.js" ></script>
  
    <script src="/lib/tocbot/tocbot.min.js" ></script>
    <script>
      $(document).ready(function () {
        tocbot.init({
          tocSelector: '#tocbot',
          contentSelector: '.post-content',
          headingSelector: 'h1,h2,h3,h4,h5,h6',
          linkClass: 'tocbot-link',
          activeLinkClass: 'tocbot-active-link',
          listClass: 'tocbot-list',
          isCollapsedClass: 'tocbot-is-collapsed',
          collapsibleClass: 'tocbot-is-collapsible',
          scrollSmooth: true,
        });
      });
    </script>
  



  <script src="/lib/smoothscroll/SmoothScroll.min.js" ></script>



  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>


<!-- Plugins -->



  <script src="/lib/prettify/prettify.min.js" ></script>
  <script>
    $(document).ready(function () {
      $('pre').addClass('prettyprint  ');
      prettyPrint();
    })
  </script>



  <script src="/lib/typed/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "Titanic 项目详解&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script src="/lib/anchor/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      getSearchFile(path);
      this.onclick = null
    }
  </script>



  <script src="/lib/fancybox/jquery.fancybox.min.js" ></script>
  <script>
    $("#post img:not(.no-zoom img, img[no-zoom])").each(
      function () {
        var element = document.createElement("a");
        $(element).attr("data-fancybox", "images");
        $(element).attr("href", $(this).attr("src"));
        $(this).wrap(element);
      }
    );
  </script>



  

  
    <!-- MathJax -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
          tex2jax: {
              inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
              processEscapes: true,
              skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
          }
      });

      MathJax.Hub.Queue(function() {
          var all = MathJax.Hub.getAllJax(), i;
          for(i=0; i < all.length; i += 1) {
              all[i].SourceElement().parentNode.className += ' has-jax';
          }
      });

    </script>

    <script src="https://cdn.staticfile.org/mathjax/2.7.6/MathJax.js?config=TeX-MML-AM_CHTML" ></script>

  



  
  
    <script type="text/javascript">
      //定义获取词语下标
      var a_idx = 0;
      jQuery(document).ready(function ($) {
        //点击body时触发事件
        $("body").click(function (e) {
          //需要显示的词语
          var a = new Array("富强", "民主", "文明", "和谐", "自由", "平等", "公正", "法治", "爱国", "敬业", "诚信", "友善");
          //设置词语给span标签
          var $i = $("<span/>").text(a[a_idx]);
          //下标等于原来下标+1  余 词语总数
          a_idx = (a_idx + 1) % a.length;
          //获取鼠标指针的位置，分别相对于文档的左和右边缘。
          //获取x和y的指针坐标
          var x = e.pageX, y = e.pageY;
          //在鼠标的指针的位置给$i定义的span标签添加css样式
          $i.css({
            "z-index": 999,
            "top": y - 20,
            "left": x,
            "position": "absolute",
            "font-weight": "bold",
            "color": rand_color()
          });
          // 随机颜色
          function rand_color() {
            return "rgb(" + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + ")"
          }
          //在body添加这个标签
          $("body").append($i);
          //animate() 方法执行 CSS 属性集的自定义动画。
          //该方法通过CSS样式将元素从一个状态改变为另一个状态。CSS属性值是逐渐改变的，这样就可以创建动画效果。
          //详情请看http://www.w3school.com.cn/jquery/effect_animate.asp
          $i.animate({
            //将原来的位置向上移动180
            "top": y - 180,
            "opacity": 0
            //1500动画的速度
          }, 1500, function () {
            //时间到了自动删除
            $i.remove();
          });
        });
      })
      ;
    </script>
  








</body>
</html>
